---
title: frp 内网穿透
date: 2019-04-04
update:
slug:
tag:
copyright: true
comment: true
---

离校后就再也不能使用校内的一些服务，比如图书馆里的一些镜像站，以及教务处评教的网站，学校离校系统的网站等等。
看了几遍博客后发现一些内网穿透的坑
最近需要内网穿透远程登录家里的PC，按照frp配置文件的注释可以很详尽地知道每一个参数的作用，在次就不用搬来配置文件的注释。

当用于内网穿透访问内网服务器的web服务时，翻看了大部分的中文博客。一个普遍的错误就是使用frp+ss或nginx来组合实现内网穿透访问内网web服务器，而且frpc client端并不是web服务器时，其实在frpc.ini配置里的local_ip和local_port是可以监听除0.0.0.0、127.0.0.1、以及frpc 本机ip。frpc端是完全可以监听本机外的ip，甚至外网的ip也可以监听（没意义）。翻看了大部分关于frp内网穿透的中文博客，毫无列外的都把local_ip设置为frpc本机ip。
进行校园网内网穿透（教务处系统）时，只需要知道教务处系统的IP以及端口好就可以，自己可以动手实验，frp client 端的 local_ip你就会恍然大悟，frpc还可以起到端口转发的功能，只不过每个端口只可转发TCP或UDP。
frp的另一个用处就是内网穿透自己的手机：具体做法就是，PC和手机同处一个内网，手机端下载tinyweb 程序，开启个web服务器，设置分享的目录。之后修改PC端的frpc.ini配置把local_IP设置为手机的内网IP，端口号设置为tinyweb服务的端口号。启动frpc服务后，就可以通过rpc service端访问手机共享的目录。在此需要注意的时，要设置好tinyweb服务共享的目录。默认是用户目录，这样暴露在外网及其不安全。手机端也是可以直接部署frp client的，只不过需要装tmux等，比较麻烦。

废话这么多，总结一点就是frp client端的local_ip和local_port是可以监听为frp client本机IP之外的IP的。不要被loal_ip这层含义误导了。
